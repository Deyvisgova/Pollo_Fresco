<section class="seccion__tarjeta">
  <header class="seccion__encabezado">
    <div>
      <h3>Lotes y ganancias</h3>
      <p>Registra productos por lote, precio y estado. Aquí puedes editar o eliminar si el lote está abierto.</p>
    </div>
    <button class="boton boton--primario">Nuevo lote</button>
  </header>

  <div class="seccion__acciones">
    <input
      type="search"
      placeholder="Buscar por lote, tipo, producto o estado..."
      [(ngModel)]="filtro"
    />
    <button class="boton boton--secundario">Filtrar</button>
  </div>

  <div class="seccion__tabla">
    <table>
      <thead>
        <tr>
          <th>Lote</th>
          <th>Tipo</th>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Subtotal</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let lote of lotesFiltrados">
          <td>{{ lote.id }}</td>
          <td>{{ lote.tipo }}</td>
          <td>{{ lote.producto }}</td>
          <td>{{ lote.cantidad }}</td>
          <td>S/ {{ lote.precioUnitario | number : '1.2-2' }}</td>
          <td>S/ {{ lote.subtotal | number : '1.2-2' }}</td>
          <td>
            <span class="etiqueta" [class.etiqueta--cerrada]="lote.estado === 'CERRADO'">
              {{ lote.estado }}
            </span>
          </td>
          <td class="tabla__acciones">
            <button
              class="boton boton--texto"
              [disabled]="lote.estado === 'CERRADO'"
              (click)="editarLote(lote)"
            >
              Editar
            </button>
            <button
              class="boton boton--texto boton--peligro"
              [disabled]="lote.estado === 'CERRADO'"
              (click)="eliminarLote(lote)"
            >
              Eliminar
            </button>
          </td>
        </tr>
        <tr *ngIf="lotesFiltrados.length === 0">
          <td colspan="8">No hay registros con ese filtro.</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<section class="seccion__grid">
  <article class="seccion__tarjeta seccion__tarjeta--info">
    <h3>Flujo por lote</h3>
    <ol>
      <li>Registrar compra del lote (costo total y productos).</li>
      <li>Vender todo el lote sin mezclarlo con la venta diaria de pollo.</li>
      <li>Liquidar ganancias cuando se termina el stock.</li>
    </ol>
  </article>

  <article class="seccion__tarjeta seccion__tarjeta--destacado">
    <h3>Separación de cajas</h3>
    <ul>
      <li><strong>Congelados:</strong> ventas y ganancias independientes.</li>
      <li><strong>Huevos:</strong> ventas y ganancias independientes.</li>
      <li><strong>Pollo diario:</strong> no se mezcla con otros productos.</li>
    </ul>
  </article>
</section>
